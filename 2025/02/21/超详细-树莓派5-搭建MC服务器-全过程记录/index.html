<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content="Hexo Theme Redefine"><meta name="author" content="Coast23"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://registry.npmmirror.com" crossorigin><link rel="canonical" href="https://coast23.github.io/2025/02/21/超详细-树莓派5-搭建mc服务器-全过程记录/"><meta name="robots" content="index,follow"><meta name="googlebot" content="index,follow"><meta name="revisit-after" content="1 days"><meta name="description" content="Hexo Theme Redefine, Redefine Your Hexo Journey."><meta property="og:type" content="article"><meta property="og:title" content="[超详细] 树莓派5 搭建MC服务器 全过程记录"><meta property="og:url" content="https://coast23.github.io/2025/02/21/%E8%B6%85%E8%AF%A6%E7%BB%86-%E6%A0%91%E8%8E%93%E6%B4%BE5-%E6%90%AD%E5%BB%BAMC%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%85%A8%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/index.html"><meta property="og:site_name" content="Coast23&#39;s Blog"><meta property="og:description" content="Hexo Theme Redefine, Redefine Your Hexo Journey."><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://coast23.github.io/images/redefine-og.webp"><meta property="article:published_time" content="2025-02-21T08:40:28.308Z"><meta property="article:modified_time" content="2025-02-24T10:24:46.821Z"><meta property="article:author" content="Coast23"><meta property="article:tag" content="树莓派"><meta property="article:tag" content="Minecraft"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://coast23.github.io/images/redefine-og.webp"><script src="https://www.googletagmanager.com/gtag/js?id=G-YZEBH0E82F"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-YZEBH0E82F")</script><link rel="icon" type="image/png" href="/images/favicon3/favicon.ico" sizes="192x192"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon3/favicon.ico"><meta name="theme-color" content="#66CCFF"><link rel="shortcut icon" href="/images/favicon3/favicon.ico"><title>[超详细] 树莓派5 搭建MC服务器 全过程记录 | Coast23&#39;s Blog</title><link rel="stylesheet" href="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/fonts/Chillax/chillax.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/css/build/tailwind.css"><link rel="stylesheet" href="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/fonts/GeistMono/geist-mono.css"><link rel="stylesheet" href="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/fonts/Geist/geist.css"><script src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/libs/anime.min.js"></script><script id="hexo-configurations">window.config={hostname:"coast23.github.io",root:"/",language:"zh-CN",path:"search.xml"},window.theme={articles:{style:{font_size:"18px",line_height:1.6,image_border_radius:"14px",image_alignment:"center",image_caption:!1,link_icon:!0,delete_mask:!1,title_alignment:"left",headings_top_spacing:{h1:"2.8rem",h2:"2.3rem",h3:"1.9rem",h4:"1.6rem",h5:"1.4rem",h6:"1.3rem"}},word_count:{enable:!0,count:!0,min2read:!0},author_label:{enable:!1,auto:!1,list:[]},code_block:{copy:!0,style:"mac",highlight_theme:{light:"github",dark:"vs2015"},font:{enable:!1,family:null,url:null}},toc:{enable:!0,max_depth:4,number:!1,expand:!0,init_open:!0},copyright:{enable:!0,default:"cc_by_nc_sa"},lazyload:!0,pangu_js:!1,recommendation:{enable:!1,title:"推荐阅读",limit:3,mobile_limit:2,placeholder:"/images/wallhaven-wqery6-light.webp",skip_dirs:[]}},colors:{primary:"#66CCFF",secondary:null,default_mode:"light"},global:{fonts:{chinese:{enable:!1,family:null,url:null},english:{enable:!1,family:null,url:null},title:{enable:!1,family:null,url:null}},content_max_width:"1000px",sidebar_width:"210px",hover:{shadow:!0,scale:!1},scroll_progress:{bar:!1,percentage:!0},website_counter:{url:"https://cn.vercount.one/js",enable:!0,site_pv:!0,site_uv:!0,post_pv:!0},single_page:!0,preloader:{enable:!0,custom_message:"Loading..."},open_graph:{enable:!0,image:"/images/redefine-og.webp",description:"Hexo Theme Redefine, Redefine Your Hexo Journey."},google_analytics:{enable:!0,id:"G-YZEBH0E82F"}},home_banner:{enable:!0,style:"fixed",image:{light:"/images/light3.webp",dark:"/images/dark.webp"},title:"Hello World!",subtitle:{text:["One day, in retrospect, the years of struggle will strike you as the most beautiful."],hitokoto:{enable:!1,show_author:!1,api:"https://v1.hitokoto.cn"},typing_speed:45,backing_speed:20,starting_delay:500,backing_delay:2300,loop:!0,smart_backspace:!0},text_color:{light:"#537f8c",dark:"#d1d1b6"},text_style:{title_size:"3.3rem",subtitle_size:"1.8rem",line_height:1.2},custom_font:{enable:!1,family:null,url:null},social_links:{enable:!0,style:"default",links:{github:"https://github.com/Coast23",instagram:null,zhihu:null,twitter:null,email:null},qrs:{weixin:null}}},plugins:{feed:{enable:!1},aplayer:{enable:!1,type:"fixed",audios:[{name:null,artist:null,url:null,cover:null,lrc:null}]},mermaid:{enable:!0,version:"11.4.1"}},version:"2.8.2",navbar:{auto_hide:!0,color:{left:"#fbc2eb",right:"#a6c1ee",transparency:30},width:{home:"1200px",pages:"1000px"},links:{Home:{path:"/",icon:"fa-regular fa-house"},Archives:{path:"/archives",icon:"fa-regular fa-archive",submenus:{"文章":"/archives","分类":"/categories","标签":"/tags"}},"书签":{path:"/bookmarks",icon:"fa-regular fa-bookmark"},About:{path:"/about",icon:"fa-regular fa-user",submenus:{Coast23:"/about",Friends:"/friends"}}},search:{enable:!0,preload:!0}},page_templates:{friends_column:2,tags_style:"blur"},home:{sidebar:{enable:!0,position:"left",first_item:"menu",announcement:"輝いていこう",show_on_mobile:!0,links:{Tags:{path:"/tags",icon:"fa-regular fa-tags"},Archives:{path:"/archives",icon:"fa-regular fa-archive"},Categories:{path:"/categories",icon:"fa-regular fa-folder"}}},article_date_format:"auto",excerpt_length:200,categories:{enable:!0,limit:10},tags:{enable:!0,limit:10}},footerStart:"2024/12/16 18:45:14"},window.lang_ago={second:"%s 秒前",minute:"%s 分钟前",hour:"%s 小时前",day:"%s 天前",week:"%s 周前",month:"%s 个月前",year:"%s 年前"},window.data={masonry:!1}</script><link rel="stylesheet" href="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/fontawesome/fontawesome.min.css"><link rel="stylesheet" href="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/fontawesome/brands.min.css"><link rel="stylesheet" href="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/fontawesome/solid.min.css"><link rel="stylesheet" href="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/fontawesome/regular.min.css"><link rel="stylesheet" href="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/fontawesome/sharp-solid.min.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div class="progress-bar-container"><span class="pjax-progress-bar"></span></div><style>:root{--preloader-background-color:#fff;--preloader-text-color:#000}@media (prefers-color-scheme:dark){:root{--preloader-background-color:#202124;--preloader-text-color:#fff}}@media (prefers-color-scheme:light){:root{--preloader-background-color:#fff;--preloader-text-color:#000}}@media (max-width:600px){.ml13{font-size:2.6rem!important}}.preloader{display:flex;flex-direction:column;gap:1rem;align-items:center;justify-content:center;position:fixed;padding:12px;top:0;right:0;bottom:0;left:0;width:100vw;height:100vh;background-color:var(--preloader-background-color);z-index:1100;transition:opacity .2s ease-in-out}.ml13{font-size:3.2rem;color:var(--preloader-text-color);letter-spacing:-1px;font-weight:500;font-family:Chillax-Variable,sans-serif;text-align:center}.ml13 .word{display:inline-flex;flex-wrap:wrap;white-space:nowrap}.ml13 .letter{display:inline-block;line-height:1em}</style><div class="preloader"><h2 class="ml13">Loading...</h2><script>var textWrapper = document.querySelector('.ml13');
        // Split text into words
        var words = textWrapper.textContent.trim().split(' ');

        // Clear the existing content
        textWrapper.innerHTML = '';

        // Wrap each word and its letters in spans
        words.forEach(function(word) {
            var wordSpan = document.createElement('span');
            wordSpan.classList.add('word');
            wordSpan.innerHTML = word.replace(/\S/g, "<span class='letter'>$&</span>");
            textWrapper.appendChild(wordSpan);
            textWrapper.appendChild(document.createTextNode(' ')); // Add space between words
        });

        var animation = anime.timeline({ loop: true })
            .add({
                targets: '.ml13 .letter',
                translateY: [20, 0],
                translateZ: 0,
                opacity: [0, 1],
                filter: ['blur(5px)', 'blur(0px)'],
                easing: "easeOutExpo",
                duration: 1200,
                delay: (el, i) => 300 + 20 * i,
            })
            .add({
                targets: '.ml13 .letter',
                translateY: [0, -20],
                opacity: [1, 0],
                filter: ['blur(0px)', 'blur(5px)'],
                easing: "easeInExpo",
                duration: 1000,
                delay: (el, i) => 15 * i,
                complete: function() {
                    hidePreloader();
                }
            }, '-=700');


        let themeStatus = JSON.parse(localStorage.getItem('REDEFINE-THEME-STATUS'))?.isDark;

        // If the theme status is not found in local storage, check the preferred color scheme
        if (themeStatus === undefined || themeStatus === null) {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                themeStatus = 'dark';
            } else {
                themeStatus = 'light';
            }
        }

        // Now you can use the themeStatus variable in your code
        if (themeStatus) {
            document.documentElement.style.setProperty('--preloader-background-color', '#202124');
            document.documentElement.style.setProperty('--preloader-text-color', '#fff');
        } else {
            document.documentElement.style.setProperty('--preloader-background-color', '#fff');
            document.documentElement.style.setProperty('--preloader-text-color', '#000');
        }

        window.addEventListener('load', function () {
            setTimeout(hidePreloader, 5000); // Call hidePreloader after 5000 milliseconds if not already called by animation
        });

        function hidePreloader() {
            var preloader = document.querySelector('.preloader');
            preloader.style.opacity = '0';
            setTimeout(function () {
                preloader.style.display = 'none';
            }, 200);
        }</script></div><main class="page-container" id="swup"><div class="main-content-container flex flex-col justify-between min-h-dvh"><div class="main-content-header"><header class="navbar-container px-6 md:px-12"><div class="navbar-content transition-navbar"><div class="left"><a class="logo-image h-8 w-8 sm:w-10 sm:h-10 mr-3" href="/"><img src="/images/favicon3/android-chrome-512x512.png" class="w-full h-full rounded-sm"> </a><a class="logo-title" href="/">Coast23&#39;s Blog</a></div><div class="right"><div class="desktop"><ul class="navbar-list"><li class="navbar-item"><a href="/"><i class="fa-regular fa-house fa-fw"></i> 首页</a></li><li class="navbar-item"><a class="has-dropdown" href="#" onclick="&#34;return" false;&#34;><i class="fa-regular fa-archive fa-fw"></i> 归档 <i class="fa-solid fa-chevron-down fa-fw"></i></a><ul class="sub-menu"><li><a href="/archives">文章</a></li><li><a href="/categories">分类</a></li><li><a href="/tags">标签</a></li></ul></li><li class="navbar-item"><a href="/bookmarks"><i class="fa-regular fa-bookmark fa-fw"></i> 书签</a></li><li class="navbar-item"><a class="has-dropdown" href="#" onclick="&#34;return" false;&#34;><i class="fa-regular fa-user fa-fw"></i> 关于 <i class="fa-solid fa-chevron-down fa-fw"></i></a><ul class="sub-menu"><li><a href="/about">COAST23</a></li><li><a href="/friends">友情链接</a></li></ul></li><li class="navbar-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></li></ul></div><div class="mobile"><div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></div><div class="icon-item navbar-bar"><div class="navbar-bar-middle"></div></div></div></div></div><div class="navbar-drawer h-dvh w-full absolute top-0 left-0 bg-background-color flex flex-col justify-between"><ul class="drawer-navbar-list flex flex-col px-4 justify-center items-start"><li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full"><a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full" href="/"><span>首页 </span><i class="fa-regular fa-house fa-sm fa-fw"></i></a></li><li class="drawer-navbar-item-sub text-base my-1.5 flex flex-col w-full"><div class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary cursor-pointer text-2xl font-semibold group border-b border-border-color hover:border-primary w-full" navbar-data-toggle="submenu-Archives"><span>归档 </span><i class="fa-solid fa-chevron-right fa-sm fa-fw transition-all"></i></div><div class="flex-col items-start px-2 py-2 hidden" data-target="submenu-Archives"><div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl"><a class="text-third-text-color text-xl" href="/archives">文章</a></div><div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl"><a class="text-third-text-color text-xl" href="/categories">分类</a></div><div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl"><a class="text-third-text-color text-xl" href="/tags">标签</a></div></div></li><li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full"><a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full" href="/bookmarks"><span>书签 </span><i class="fa-regular fa-bookmark fa-sm fa-fw"></i></a></li><li class="drawer-navbar-item-sub text-base my-1.5 flex flex-col w-full"><div class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary cursor-pointer text-2xl font-semibold group border-b border-border-color hover:border-primary w-full" navbar-data-toggle="submenu-About"><span>关于 </span><i class="fa-solid fa-chevron-right fa-sm fa-fw transition-all"></i></div><div class="flex-col items-start px-2 py-2 hidden" data-target="submenu-About"><div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl"><a class="text-third-text-color text-xl" href="/about">COAST23</a></div><div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl"><a class="text-third-text-color text-xl" href="/friends">友情链接</a></div></div></li><li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full"><a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full active" href="/tags"><span>Tags</span> <i class="fa-regular fa-tags fa-sm fa-fw"></i></a></li><li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full"><a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full active" href="/categories"><span>Categories</span> <i class="fa-regular fa-folder fa-sm fa-fw"></i></a></li></ul><div class="statistics flex justify-around my-2.5"><a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/tags"><div class="number text-2xl sm:text-xl text-second-text-color font-semibold">25</div><div class="label text-third-text-color text-sm">标签</div></a><a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/categories"><div class="number text-2xl sm:text-xl text-second-text-color font-semibold">4</div><div class="label text-third-text-color text-sm">分类</div></a><a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/archives"><div class="number text-2xl sm:text-xl text-second-text-color font-semibold">22</div><div class="label text-third-text-color text-sm">文章</div></a></div></div><div class="window-mask"></div></header></div><div class="main-content-body transition-fade-up"><div class="main-content"><div class="post-page-container flex relative justify-between box-border w-full h-full"><div class="article-content-container"><div class="article-title relative w-full"><div class="w-full flex items-center pt-6 justify-start"><h1 class="article-title-regular text-second-text-color tracking-tight text-4xl md:text-6xl font-semibold px-2 sm:px-6 md:px-8 py-3">[超详细] 树莓派5 搭建MC服务器 全过程记录</h1></div></div><div class="article-header flex flex-row gap-2 items-center px-2 sm:px-6 md:px-8"><div class="avatar w-[46px] h-[46px] flex-shrink-0 rounded-medium border border-border-color p-[1px]"><img src="/images/avatar.png"></div><div class="info flex flex-col justify-between"><div class="author flex items-center"><span class="name text-default-text-color text-lg font-semibold">Coast23</span></div><div class="meta-info"><div class="article-meta-info"><span class="article-date article-meta-item"><i class="fa-regular fa-pen-fancy"></i>&nbsp; <span class="desktop">2025-02-21 16:40:28</span> <span class="mobile">2025-02-21 16:40:28</span> <span class="hover-info">创建</span> </span><span class="article-date article-meta-item"><i class="fa-regular fa-wrench"></i>&nbsp; <span class="desktop">2025-02-24 18:24:46</span> <span class="mobile">2025-02-24 18:24:46</span> <span class="hover-info">更新</span> </span><span class="article-categories article-meta-item"><i class="fa-regular fa-folders"></i>&nbsp;<ul><li><a href="/categories/%E6%9D%82%E9%A1%B9/">杂项</a>&nbsp;</li></ul></span><span class="article-tags article-meta-item"><i class="fa-regular fa-tags"></i>&nbsp;<ul><li><a href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/">树莓派</a>&nbsp;</li><li>| <a href="/tags/Minecraft/">Minecraft</a>&nbsp;</li></ul></span><span class="article-wordcount article-meta-item"><i class="fa-regular fa-typewriter"></i>&nbsp;<span>8.1k 字</span> </span><span class="article-min2read article-meta-item"><i class="fa-regular fa-clock"></i>&nbsp;<span>33 分钟</span> </span><span class="article-pv article-meta-item"><i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span></span></div></div></div></div><div class="article-expire mt-4 mx-2 sm:mx-6 md:mx-8 note p-4 rounded-lg red icon hidden" id="expiration-container"><i class="expire-icon fa-solid fa-timer mr-0.5 text-red-600 dark:text-red-400"></i> <span class="expire-label text-red-600 dark:text-red-400" id="expiration-date">这篇文章最后更新于 some 天前，内容可能已经过时。</span></div><script data-swup-reload-script>function updateExpirationDate(){try{const e=new Date("Thu Jan 01 2026 00:00:00 GMT+0800 (香港标准时间)"),t=new Date("Mon Feb 24 2025 18:24:46 GMT+0800"),n=new Date,a=document.getElementById("expiration-date"),o=document.getElementById("expiration-container");let i=Math.floor((n-t)/864e5);e<n&&(o.classList.remove("hidden"),a.innerHTML=a.innerHTML.replace("some",i))}catch(e){}}document.addEventListener("DOMContentLoaded",(function(){updateExpirationDate()}));try{swup.hooks.on("page:view",updateExpirationDate)}catch(e){}</script><div class="article-content markdown-body px-2 sm:px-6 md:px-8 pb-8"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>我有一块<em>8GB</em> RAM的<em>RaspBerry Pi 5</em>, 一直在吃灰. 后来决定在上面搭建一个<strong>Minecraft服务器</strong>供同学游玩, 然而搭建的时候还是踩了不少坑. 比如, 原来的官方RaspBerry Pi OS是基于Debian Bullseye的, 但新版改成<strong>Debian Bookworm</strong>了, 网上的很多教程都不再适用. 再如, 还要解决<strong>宿舍断电</strong>和<strong>公网访问</strong>的问题, 网上似乎没有把整个搭建过程讲的非常清楚的文章, 于是我便决定把我的搭建过程记录下来, 或许可以帮到 同样想用树莓派搭建Minecraft服务器的人 <del>(真的会有人用树莓派干这事吗)</del>.</p><p>不过, 由于我对Linux不是很熟悉, 一些解决方案很可能不是最优的, 所以我的思路和操作只供参考, 也欢迎大佬在评论区提出更好的思路.</p><p>当然, 这里的大部分操作也适用于非RaspBerry Pi OS的Linux服务器.</p><p>这篇文章是<strong>萌新向</strong> (虽然我清楚, 想到用Linux作为服务器的应该都是大佬), 每一步我都会啰嗦地讲解, 以保证小白也能看懂. 大佬可以不看或者根据目录跳着看.</p><b><p>在一番折腾后, 你将:</p><ul><li>失去金钱和时间</li><li>获得游戏的快乐</li><li>学习相关命令</li><li>积累运维经验</li></ul></b><hr><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>要有一块RaspBerry Pi 5, MicroSD卡建议用闪迪等大厂的卡, <strong>64GB</strong> 以上最好.</p><div class="note p-4 mb-4 rounded-small info icon-padding"><i class="note-icon fa-solid fa-circle-info"></i><p><strong>如果已经设置好系统, 就跳过这一步</strong></p></div><h3 id="烧录系统"><a href="#烧录系统" class="headerlink" title="烧录系统"></a>烧录系统</h3><p>给MicroSD卡烧录系统, 建议使用官方的烧录工具<a class="link" target="_blank" rel="noopener" href="https://www.raspberrypi.com/software/">Raspberry Pi Imager<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>, 小白也能轻松上手.</p><p>插入MicroSD卡, 打开烧录工具, 填写设备型号、系统(官方64位)、储存卡.</p><p><img lazyload src="/images/loading.svg" data-src="/2025/02/21/%E8%B6%85%E8%AF%A6%E7%BB%86-%E6%A0%91%E8%8E%93%E6%B4%BE5-%E6%90%AD%E5%BB%BAMC%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%85%A8%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/1.png" alt="1"></p><p>然后按<code>NEXT</code>. 编辑一下设置.</p><p><img lazyload src="/images/loading.svg" data-src="/2025/02/21/%E8%B6%85%E8%AF%A6%E7%BB%86-%E6%A0%91%E8%8E%93%E6%B4%BE5-%E6%90%AD%E5%BB%BAMC%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%85%A8%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/2.png" alt="2"></p><p>设置用户名和密码 <strong>(一定要设置强密码!!!)</strong>, WIFI填写<b><mark>树莓派和PC能同时连接的设备</mark></b>, 这里我填的是 <strong>手机热点</strong>.</p><p><img lazyload src="/images/loading.svg" data-src="/2025/02/21/%E8%B6%85%E8%AF%A6%E7%BB%86-%E6%A0%91%E8%8E%93%E6%B4%BE5-%E6%90%AD%E5%BB%BAMC%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%85%A8%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/3.png" alt="3"></p><p>如果你熟悉SSH的公钥登入, 建议<code>SERVICES</code>页里把SSH改成公钥登入, 比用密码更安全. 但如果不熟悉且懒得折腾的话, 还是保持用密码登入吧.</p><p>再次提醒: <strong>一定要设置强密码!!!</strong></p><p>保存设置, 开始烧录.</p><p>烧录后把MicroSD卡插到树莓派上, 插电开机, 等待系统启动.</p><p>树莓派开机会自动连接烧录阶段保留的WIFI, PC也切换到这个WIFI下.</p><hr><h3 id="换源"><a href="#换源" class="headerlink" title="换源"></a>换源</h3><p>这步讲解如何SSH登入树莓派, 并更换软件源. 会的话直接跳过就好.</p><p>需要2样东西: <strong>树莓派的IP</strong> 和 <strong>SSH客户端</strong>.</p><h4 id="获取树莓派IP"><a href="#获取树莓派IP" class="headerlink" title="获取树莓派IP"></a>获取树莓派IP</h4><p>其实就是获取局域网其它设备的IP. 方法不少, 工具也很多.</p><p>如果连的是路由器, 可以直接登入路由器后台查看.</p><p>或者使用一些局域网IP扫描工具, 这里推荐2个:</p><ul><li><a class="link" target="_blank" rel="noopener" href="https://www.nirsoft.net/utils/wireless_network_watcher.html">WNetWatcher<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>: 最推荐, 体积小, 扫描快, 界面干净, 下载链接在官网最下面.</li><li><a class="link" target="_blank" rel="noopener" href="https://www.advanced-ip-scanner.com/">Advanced IP Scanner<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>: 功能全面, 但相应地, 体积大, 扫描也慢, 需要自己指定IP段.</li></ul><p>以<strong>WNetWatcher v2.42</strong>为例, 下载解压后, 运行程序, 程序启动会自动扫描, 不出意外就能看到树莓派的IP了.</p><hr><h4 id="SSH连接树莓派-换源"><a href="#SSH连接树莓派-换源" class="headerlink" title="SSH连接树莓派 &amp; 换源"></a>SSH连接树莓派 &amp; 换源</h4><p>然后就是SSH连接树莓派, 这里我推荐用<a class="link" target="_blank" rel="noopener" href="https://www.putty.org/">PuTTY<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>. <strong>不推荐使用Xshell</strong>, 其部分版本存在后门, 不安全.</p><p>如果你的终端已经有<code>ssh</code>命令, 你也可以直接<code>ssh &lt;name&gt;@&lt;树莓派IP&gt;</code>来登入.</p><p>但我使用<strong>PuTTY</strong>, 所以接下来都是以PuTTY为例.</p><p><img lazyload src="/images/loading.svg" data-src="/2025/02/21/%E8%B6%85%E8%AF%A6%E7%BB%86-%E6%A0%91%E8%8E%93%E6%B4%BE5-%E6%90%AD%E5%BB%BAMC%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%85%A8%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/4.png" alt="4"></p><p>这里填入树莓派的IP地址, 端口默认22, 然后点击下方的<code>Open</code>.</p><p>如果有弹出<code>PuTTY Security Alert</code>窗口, 选择<code>Accept</code>即可.</p><p>然后, 在终端中输入树莓派的账号和密码(烧录系统时设置的, 注意密码没有回显, 看不到输入的密码是正常的), 回车.</p><p>登入成功后, 参照<a class="link" target="_blank" rel="noopener" href="https://blog.csdn.net/AbaAbaxxx_/article/details/143023064">这篇文章<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>换源.</p><p>(懒得自己再写一遍.)</p><hr><h2 id="安装jdk与paper端"><a href="#安装jdk与paper端" class="headerlink" title="安装jdk与paper端"></a>安装jdk与paper端</h2><p>Java服务端实在太多了, 常见的有以下几种:</p><ul><li><a target="_blank" rel="noopener" href="https://www.minecraft.net/zh-hans/download/server"><strong>官方服务器</strong></a>: 纯原版, 最稳定, 但加不了插件和mod.</li><li><a target="_blank" rel="noopener" href="https://files.minecraftforge.net/"><strong>Forge端</strong></a>: 可以在服务器上装Forge Mods.</li><li><a target="_blank" rel="noopener" href="https://fabricmc.net/use/server/"><strong>Fabric端</strong></a>: 可以在服务器上装Fabric Mods.</li><li><a target="_blank" rel="noopener" href="https://papermc.io/"><strong>Paper</strong></a>: 属于Spigot的分支, 兼容大部分Bukkit和Spigot插件, 有很好的性能和优化选项.</li><li><a target="_blank" rel="noopener" href="https://purpurmc.org/"><strong>Purpur</strong></a>: 基于Paper, 应该比Paper好使, 但我没去了解过, 不做点评.</li><li><a target="_blank" rel="noopener" href="https://mohistmc.com/"><strong>Mohist</strong></a>: 可以同时装Forge Mods和 Bukkit&#x2F;Spigot 插件, 很强大.</li><li><a target="_blank" rel="noopener" href="https://mcsmanager.com/"><strong>MCSManager</strong></a>: 非常流行的面板服, 一键部署, 功能全面.</li></ul><p>一般来说, 用<strong>MCSManager</strong>来部署应该是最简单最方便的, 网上的教程也很多, 但是, 用面板服需要安装一些依赖, 而且很多功能可能是用不上的, 同时可能也更吃性能. 而我偏好轻量、简洁、按需添加功能的应用, 因此我没有选择用面板服.</p><p>再加上各种各样的原因, 最终我选择的是<strong>Paper端</strong>, 你可以根据自己的需求和兴趣选择其它的服务端.</p><p>以下教程是针对<strong>Paper端</strong>的, 如果想使用其它服务端, 请自行查阅对应的官方文档.</p><hr><h3 id="安装jdk-配置系统变量"><a href="#安装jdk-配置系统变量" class="headerlink" title="安装jdk &amp; 配置系统变量"></a>安装jdk &amp; 配置系统变量</h3><p>根据Paper(Minecraft)版本, 选择对应的Java JDK进行安装.</p><table><thead><tr><th align="center">Paper Version</th><th align="center">Recommened Java Version</th></tr></thead><tbody><tr><td align="center">1.8 ~ 1.11</td><td align="center">Java 8</td></tr><tr><td align="center">1.12 ~ 1.16.4</td><td align="center">Java 11</td></tr><tr><td align="center">1.16.5</td><td align="center">Java 16</td></tr><tr><td align="center">1.17.1 ~ 1.18.1+</td><td align="center"><strong>Java 21</strong></td></tr></tbody></table><center><p>上表出自Paper的<a class="link" target="_blank" rel="noopener" href="https://docs.papermc.io/paper/getting-started">官方文档<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p></center><p>我选择的Minecraft版本是<strong>1.21.1</strong>, 所以要安装<strong>JDK 21</strong>.</p><p>一般来说, 可以直接使用<strong>apt</strong>安装 <strong>openjdk-21-jdk</strong>:</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update &amp;&amp; <span class="built_in">sudo</span> apt install openjdk-21-jdk</span><br></pre></td></tr></table></figure></div><p>但是, Debian的软件仓库更新很慢, 而OpenJDK 21又是一个相对较新的版本, 我使用上述命令的时候报错了:<br><code>E: Unable to locate package openjdk-21-jdk</code>.</p><div class="note p-4 mb-4 rounded-small info icon-padding"><i class="note-icon fa-solid fa-circle-info"></i><p><strong>如果你能通过上述命令安装, 可以跳过以下手动安装的步骤.</strong></p></div><p>前往<a class="link" target="_blank" rel="noopener" href="https://www.oracle.com/in/java/technologies/downloads/#java21">Oracle网站<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>, 根据系统架构选择对应下载链接.</p><p><img lazyload src="/images/loading.svg" data-src="/2025/02/21/%E8%B6%85%E8%AF%A6%E7%BB%86-%E6%A0%91%E8%8E%93%E6%B4%BE5-%E6%90%AD%E5%BB%BAMC%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%85%A8%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/5.png" alt="5"></p><p>如果是树莓派5 + 官方系统, 选第一个.</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">wget https://download.oracle.com/java/21/latest/jdk-21_linux-aarch64_bin.tar.gz</span><br><span class="line">tar -zxvf jdk-21_linux-aarch64_bin.tar.gz</span><br></pre></td></tr></table></figure></div><p><img lazyload src="/images/loading.svg" data-src="/2025/02/21/%E8%B6%85%E8%AF%A6%E7%BB%86-%E6%A0%91%E8%8E%93%E6%B4%BE5-%E6%90%AD%E5%BB%BAMC%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%85%A8%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/6.png" alt="6"></p><p>上面的步骤完成后, 当前目录会生成一个<code>jdk-21.x.x</code>文件夹, 可以<code>ls</code>查看或者直接观测<code>tar</code>命令的输出.</p><p>把这个文件夹移到合适的目录, 我选择的是<code>/usr/local/</code>.</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">mv</span> jdk-21.0.5 /usr/local/</span><br></pre></td></tr></table></figure></div><p>接下来, 把java添加到环境变量, 也就是<code>~/.bashrc</code>, 在该文件末尾添加即可.</p><p>可以使用<code>vim</code>或<code>nano</code>等文本编辑器, 或者直接用<code>echo</code>命令添加:</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;export JAVA_HOME=/usr/local/jdk-21.0.5&quot;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;export PATH=\$JAVA_HOME/bin:\$PATH&quot;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure></div><p>然后, 输入<code>java --version</code>验证是否安装成功.</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">$ java --version</span><br><span class="line">java 21.0.5 2024-10-15 LTS</span><br><span class="line">Java(TM) SE Runtime Environment (build 21.0.5+9-LTS-239)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 21.0.5+9-LTS-239, mixed mode, sharing)</span><br></pre></td></tr></table></figure></div><p>这样就说明安装成功了.</p><hr><h3 id="安装paper-启动服务器"><a href="#安装paper-启动服务器" class="headerlink" title="安装paper &amp; 启动服务器"></a>安装paper &amp; 启动服务器</h3><p>到<a class="link" target="_blank" rel="noopener" href="https://papermc.io/downloads/paper">Paper官网<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>下载需要的版本. 我选择的是<code>1.21.1</code>, 目前最新是<code>1.21.4</code>.</p><p>如果要下载旧版本, 点击官网下载按钮下面的<a class="link" target="_blank" rel="noopener" href="https://papermc.io/downloads/all">build explorer<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>.</p><p>我这里选择<code>1.21.1</code>的latest build <code>#132</code> 版本.</p><p><img lazyload src="/images/loading.svg" data-src="/2025/02/21/%E8%B6%85%E8%AF%A6%E7%BB%86-%E6%A0%91%E8%8E%93%E6%B4%BE5-%E6%90%AD%E5%BB%BAMC%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%85%A8%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/7.png" alt="7"></p><p>你可以选择PC下载后用<strong>PuTTY</strong>的 <strong>PSFTP</strong>传给树莓派, 或者直接复制下载链接, 然后在树莓派中用<code>wget</code>下载.</p><p>我演示后者.</p><p>在下载前, 先创建一个文件夹, 作为服务器的目录. 我直接在<code>~</code>下创建了一个<code>paper</code>文件夹. (太随意了吧)</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> ~/paper</span><br><span class="line"><span class="built_in">cd</span> ~/paper</span><br></pre></td></tr></table></figure></div><p>然后下载<code>paper</code>.</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">wget https://api.papermc.io/v2/projects/paper/versions/1.21.1/builds/132/downloads/paper-1.21.1-132.jar</span><br></pre></td></tr></table></figure></div><p>下载后会在目录中得到一个<code>paper-1.21.1-132.jar</code>文件. <strong>如果下载的是别的版本, 文件名会不一样. 自己修改命令行里的文件名即可.</strong></p><p>输入以下命令来第一次启动你的服务端!</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">java -jar paper-1.21.1-132.jar</span><br></pre></td></tr></table></figure></div><p>等待片刻, 会看到这样的<code>WARN</code>:</p><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">Downloading mojang_1.21.1.jar</span><br><span class="line">Applying patches</span><br><span class="line">Starting org.bukkit.craftbukkit.Main</span><br><span class="line">*** Warning, you&#x27;ve not updated in a while! ***</span><br><span class="line">*** Please download a new build as per instructions from https://papermc.io/downloads/paper ***</span><br><span class="line">[16:58:32 INFO]: [bootstrap] Running Java 21 (Java HotSpot(TM) 64-Bit Server VM 21.0.5+9-LTS-239; Oracle Corporation null) on Linux 6.6.74+rpt-rpi-2712 (aarch64)</span><br><span class="line">[16:58:32 INFO]: [bootstrap] Loading Paper 1.21.1-132-ver/1.21.1@b48403b (2024-11-21T10:14:27Z) for Minecraft 1.21.1</span><br><span class="line">[16:58:32 INFO]: [PluginInitializerManager] Initializing plugins...</span><br><span class="line">[16:58:32 INFO]: [PluginInitializerManager] Initialized 0 plugins</span><br><span class="line">[16:58:34 INFO]: [ReobfServer] Remapping server...</span><br><span class="line">[16:58:46 WARN]: Failed to load eula.txt</span><br><span class="line">[16:58:47 INFO]: You need to agree to the EULA in order to run the server. Go to eula.txt for more info.</span><br><span class="line">[16:58:47 INFO]: [ReobfServer] Done remapping server in 13152ms.</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><p>看到<strong>Failed to load eula.txt</strong>别惊慌, 第一次启动时, 这个是正常现象. 我们需要同意<code>eula.txt</code>里的条款才能运行服务器.</p><p>使用<code>vim</code>或<code>nano</code>等文本编辑器, 把<code>eula.txt</code>最后一行的<code>eula=false</code>改为<code>eula=true</code>, 或者直接输入以下命令:</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;$s/false/true/&#x27;</span> eula.txt</span><br></pre></td></tr></table></figure></div><p>此时, 你可以使用<code>ls</code>命令查看一下目录结构, <code>Ravelloh</code>大佬在<a class="link" target="_blank" rel="noopener" href="https://ravelloh.top/posts/minecraft-paper-server">这篇文章<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>中给出了每个配置项的含义, 可以参考修改服务器配置.</p><p>你可以在<a target="_blank" rel="noopener" href="https://hangar.papermc.io/"><strong>Paper官网</strong></a>或<a target="_blank" rel="noopener" href="https://modrinth.com/plugins"><strong>Modrinth</strong></a>上获取想要的插件, 我这里就不介绍插件和服务器的配置了, 这需要服主自由发挥了.</p><p>一般来说, 服务器可以用这样的命令来启动:</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">java -Xms4G -Xmx4G -jar paper-1.21.1.jar --nogui</span><br></pre></td></tr></table></figure></div><p>解释一下上面的参数:</p><ul><li><code>-Xms4G</code>: 最小内存分配, 这里是4GB.</li><li><code>-Xmx4G</code>: 最大内存分配, 这里也是4GB. 一般来说这两个量设置成一样的就行, 具体大小要看你的RAM和服务器人数了.</li><li><code>-jar</code>: 表示要执行jar文件.</li><li><code>paper-1.21.1.jar</code>: 刚刚下载的Paper的jar文件.</li><li><code>--nogui</code>: 启动时不显示GUI界面.</li></ul><p>但<code>Ravelloh</code>大佬的文章里给出了如下优化命令:</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">java -Xms10G -Xmx10G -XX:+UseG1GC -XX:+ParallelRefProcEnabled -XX:MaxGCPauseMillis=200 -XX:+UnlockExperimentalVMOptions -XX:+DisableExplicitGC -XX:+AlwaysPreTouch -XX:G1NewSizePercent=30 -XX:G1MaxNewSizePercent=40 -XX:G1HeapRegionSize=8M -XX:G1ReservePercent=20 -XX:G1HeapWastePercent=5 -XX:G1MixedGCCountTarget=4 -XX:InitiatingHeapOccupancyPercent=15 -XX:G1MixedGCLiveThresholdPercent=90 -XX:G1RSetUpdatingPauseTimePercent=5 -XX:SurvivorRatio=32 -XX:+PerfDisableSharedMem -XX:MaxTenuringThreshold=1 -Dusing.aikars.flags=https://mcflags.emc.gs -Daikars.new.flags=<span class="literal">true</span> -jar paper.jar --nogui</span><br></pre></td></tr></table></figure></div><p>可以参考使用上述命令.</p><p><b>需要修改一下上述命令中的<code>-Xms</code>, <code>-Xmx</code>, 以及<code>paper.jar</code>. 其它保持不变.</b></p><p>在终端执行修改后的命令, 等待片刻, 服务器就启动好啦!</p><hr><h2 id="可选-远程桌面访问树莓派"><a href="#可选-远程桌面访问树莓派" class="headerlink" title="[可选] 远程桌面访问树莓派"></a>[可选] 远程桌面访问树莓派</h2><p>SSH已经允许我们远程控制树莓派了, 但如果你喜欢图形化界面, 你也可以通过远程桌面来访问树莓派.</p><p>树莓派自带vnc服务, 只需要开启它就行了.</p><h3 id="开启vnc服务"><a href="#开启vnc服务" class="headerlink" title="开启vnc服务"></a>开启vnc服务</h3><p>执行</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> raspi-config</span><br></pre></td></tr></table></figure></div><p>打开树莓派配置工具.</p><p><img lazyload src="/images/loading.svg" data-src="/2025/02/21/%E8%B6%85%E8%AF%A6%E7%BB%86-%E6%A0%91%E8%8E%93%E6%B4%BE5-%E6%90%AD%E5%BB%BAMC%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%85%A8%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/19.png" alt="19"></p><p>方向键<code>↑</code>和<code>↓</code>选择选项, <code>←</code>和<code>→</code>选择低下的<code>&lt;Select&gt;</code>和<code>&lt;Finish&gt;</code>, <code>回车</code>或<code>空格</code>表示选择当前选项.</p><p>依次选择 <code>&lt;Interface Options&gt;</code> &gt; <code>&lt;VNC&gt;</code> &gt; <code>Yes</code>.</p><p>然后, 会退出配置工具并出现一些命令, 这些命令用于开启<code>vnc</code>服务.</p><p>这时, 建议先<code>sudo reboot</code>重启一下树莓派.</p><p>然后, 可简单通过如下命令判断<code>vnc</code>服务是否开启:</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl status | grep vnc</span><br></pre></td></tr></table></figure></div><p><img lazyload src="/images/loading.svg" data-src="/2025/02/21/%E8%B6%85%E8%AF%A6%E7%BB%86-%E6%A0%91%E8%8E%93%E6%B4%BE5-%E6%90%AD%E5%BB%BAMC%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%85%A8%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/20.png" alt="20"></p><p>像这样, 就说明<code>vnc</code>服务已经开启了.</p><hr><h3 id="PC远程访问树莓派"><a href="#PC远程访问树莓派" class="headerlink" title="PC远程访问树莓派"></a>PC远程访问树莓派</h3><p>首先, 需要一个<code>vnc</code>客户端, 到<a class="link" target="_blank" rel="noopener" href="https://www.realvnc.com/en/connect/download/viewer">RealVNC官网<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>下载.</p><p>安装, 运行. (不需要登入)</p><p><img lazyload src="/images/loading.svg" data-src="/2025/02/21/%E8%B6%85%E8%AF%A6%E7%BB%86-%E6%A0%91%E8%8E%93%E6%B4%BE5-%E6%90%AD%E5%BB%BAMC%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%85%A8%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/21.png" alt="21"></p><p>这里输入树莓派的IP地址, 回车.</p><p><img lazyload src="/images/loading.svg" data-src="/2025/02/21/%E8%B6%85%E8%AF%A6%E7%BB%86-%E6%A0%91%E8%8E%93%E6%B4%BE5-%E6%90%AD%E5%BB%BAMC%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%85%A8%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/22.png" alt="22"></p><p>输入用户名和密码, 回车.</p><p>然后就可以看到树莓派的桌面了.</p><hr><h2 id="外网访问服务器"><a href="#外网访问服务器" class="headerlink" title="外网访问服务器"></a>外网访问服务器</h2><h3 id="如何更改WIFI"><a href="#如何更改WIFI" class="headerlink" title="如何更改WIFI"></a>如何更改WIFI</h3><p>目前, 树莓派连的是手机的热点, 手机热点并不能作为长期稳定的WIFI, 所以我们需要更换树莓派的WIFI.</p><p>注意, 选取的WIFI需要满足这样的条件:</p><ul><li><strong>长期稳定</strong></li><li><strong>PC和树莓派都能连上, 且WIFI支持局域网内设备互相访问</strong>, 否则无法SSH控制树莓派.</li></ul><p>之所以在最开始推荐使用手机热点, 是因为遇到我觉得手机热点比路由器要稳定. (可能哪天路由器就莫名其妙连不上Internet了).</p><p>网上关于树莓派切换WIFI的文章, 都是清一色的<strong>更改<code>wpa_supplicant.conf</code></strong>.</p><p><b><mark>但这个方法在新版系统上失效了.<mark></mark></mark></b></p><p>新的树莓派官方系统使用<strong>NetworkManager</strong>来管理网络, 所以我们需要使用<strong>nmcli</strong>命令来更改网络连接.</p><div class="note-large info"><div class="notel-title rounded-t-lg p-3 font-bold text-lg flex flex-row gap-2 items-center"><i class="notel-icon fa-solid fa-circle-info"></i><p><strong>你需要掌握的3条nmcli命令</strong></p></div><div class="notel-content"><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nmcli device wifi rescan</span><br></pre></td></tr></table></figure></div><p>该命令会重新扫描附近的WIFI.</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nmcli device wifi list</span><br></pre></td></tr></table></figure></div><p>该命令会列出扫描到的所有WIFI.</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nmcli device wifi connect &lt;SSID&gt; password &lt;password&gt;</span><br></pre></td></tr></table></figure></div><p>该命令会连接指定的WIFI, 其中<code>&lt;SSID&gt;</code>是WIFI的名称, <code>&lt;password&gt;</code>是WIFI的密码.</p></div></div><p>更改WIFI后, PC也要重新连接WIFI, 才能SSH连接树莓派.</p><p>树莓派会自动连接nmcli连接过的WIFI. (但断网重连机制可能有点问题)</p><hr><h3 id="外网访问方法1-内网穿透"><a href="#外网访问方法1-内网穿透" class="headerlink" title="外网访问方法1: 内网穿透"></a>外网访问方法1: 内网穿透</h3><p>服务器虽然启动了, 但只有同一个局域网下的玩家才能访问, 连接其它WIFI的小伙伴访问不了.</p><p>内网穿透是我最开始的解决方案, 我推荐使用<a class="link" target="_blank" rel="noopener" href="https://www.natfrp.com/">Sakura Frp<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>, 具体使用请参见官方文档.</p><p>免费节点不稳定, 延迟很随机, 如果服务器要长期运行, 建议购买青铜VIP, 10元&#x2F;月.</p><p><strong>服务 &gt; 隧道列表 &gt; 创建隧道</strong></p><p><img lazyload src="/images/loading.svg" data-src="/2025/02/21/%E8%B6%85%E8%AF%A6%E7%BB%86-%E6%A0%91%E8%8E%93%E6%B4%BE5-%E6%90%AD%E5%BB%BAMC%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%85%A8%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/8.png" alt="8"></p><p>选择节点, 设置隧道名称, 填写本地游戏端口(默认是25565), 其它依需求填写.</p><p><img lazyload src="/images/loading.svg" data-src="/2025/02/21/%E8%B6%85%E8%AF%A6%E7%BB%86-%E6%A0%91%E8%8E%93%E6%B4%BE5-%E6%90%AD%E5%BB%BAMC%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%85%A8%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/9.png" alt="9"></p><p>创建后, 在这里查看配置文件.</p><p><img lazyload src="/images/loading.svg" data-src="/2025/02/21/%E8%B6%85%E8%AF%A6%E7%BB%86-%E6%A0%91%E8%8E%93%E6%B4%BE5-%E6%90%AD%E5%BB%BAMC%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%85%A8%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/10.png" alt="10"> <img lazyload src="/images/loading.svg" data-src="/2025/02/21/%E8%B6%85%E8%AF%A6%E7%BB%86-%E6%A0%91%E8%8E%93%E6%B4%BE5-%E6%90%AD%E5%BB%BAMC%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%85%A8%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/11.png" alt="11"></p><p>记住这个 <code>-f xxxx:xxxx</code> 参数.</p><p><strong>服务 &gt; 软件下载 &gt; frpc</strong></p><p>根据系统架构选择对应的版本(树莓派就选arm64), 复制下载链接, 用<code>wget</code>下载.</p><p><img lazyload src="/images/loading.svg" data-src="/2025/02/21/%E8%B6%85%E8%AF%A6%E7%BB%86-%E6%A0%91%E8%8E%93%E6%B4%BE5-%E6%90%AD%E5%BB%BAMC%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%85%A8%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/12.png" alt="12"></p><p>接着, 选择保存<code>frpc</code>的位置, 这里我选择的是<code>~/natfrp</code>.</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> ~/natfrp</span><br><span class="line"><span class="built_in">cd</span> ~/natfrp</span><br><span class="line">wget https://nya.globalslb.net/natfrp/client/frpc/0.51.0-sakura-9.3/frpc_linux_arm64</span><br><span class="line"><span class="built_in">mv</span> frpc_linux_arm64 frpc</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> +x frpc</span><br></pre></td></tr></table></figure></div><div class="note p-4 mb-4 rounded-small success icon-padding"><i class="note-icon fa-solid fa-circle-check"></i><p><strong>Tip: sudo .&#x2F;执行文件时, 如果显示command not found, 就用sudo chmod +x &lt;文件名&gt;来添加执行权限.</strong></p></div><p>之后, 就可以通过执行<code>./~natfrp/frpc -f xxxx:xxxx</code>来启动隧道了!</p><p><img lazyload src="/images/loading.svg" data-src="/2025/02/21/%E8%B6%85%E8%AF%A6%E7%BB%86-%E6%A0%91%E8%8E%93%E6%B4%BE5-%E6%90%AD%E5%BB%BAMC%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%85%A8%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/13.png" alt="13"></p><p>隧道启动后, 就可以用控制台里提供的地址来连接服务器了! (当然, 服务器需要是开启状态.)</p><h3 id="外网访问方法2-利用公网ipv6与DDnS"><a href="#外网访问方法2-利用公网ipv6与DDnS" class="headerlink" title="外网访问方法2: 利用公网ipv6与DDnS"></a>外网访问方法2: 利用公网ipv6与DDnS</h3><p>如果你的路由器<strong>支持ipv6</strong>, 且<strong>可以被外网访问</strong>, 那么恭喜你, 你<strong>不需要内网穿透</strong>了!</p><p>这篇文章里, 和<strong>frpc</strong>有关的部分, 都可以不看了. 脚本里有<strong>frpc</strong>的部分, 都可以删了.</p><p>尽管如此, 我还是建议你在读完文章的其它内容后, 最后再来阅读这部分. 因为我是在摸索完其它内容后才发现路由器支持ipv6的, 时间顺序上这个part排在最后.</p><p>接下来讲怎么判断是否符合条件, 以及如何配置DDnS.</p><h4 id="判断是否支持ipv6"><a href="#判断是否支持ipv6" class="headerlink" title="判断是否支持ipv6"></a>判断是否支持ipv6</h4><p>如果路由器是很老的, 那大概率是不支持了. 否则就按下面的步骤过一遍来判断.</p><p>PC连接到目标WIFI, 浏览器访问<a class="link" target="_blank" rel="noopener" href="https://test-ipv6.com/">https://test-ipv6.com<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> , 如果得分为10, 则可以进行下一步的测试了.</p><p><img lazyload src="/images/loading.svg" data-src="/2025/02/21/%E8%B6%85%E8%AF%A6%E7%BB%86-%E6%A0%91%E8%8E%93%E6%B4%BE5-%E6%90%AD%E5%BB%BAMC%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%85%A8%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/14.png" alt="14"></p><p>打开<code>WNetWatcher</code>, 如果上面有<code>ipv6</code>地址, 说明支持公网ipv6的可能性很高了.</p><p><img lazyload src="/images/loading.svg" data-src="/2025/02/21/%E8%B6%85%E8%AF%A6%E7%BB%86-%E6%A0%91%E8%8E%93%E6%B4%BE5-%E6%90%AD%E5%BB%BAMC%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%85%A8%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/15.png" alt="15"></p><p>如果没有也先别放弃, 在浏览器访问路由器的IP, 输入管理员账号密码(通常贴在路由器下面)进入路由器后台.</p><p>因为各家路由器后台管理系统都不一样, 我总结不出什么通法, 反正就每个页面都点开看看, 找找有没有<code>ipv6</code>的出现.</p><p><img lazyload src="/images/loading.svg" data-src="/2025/02/21/%E8%B6%85%E8%AF%A6%E7%BB%86-%E6%A0%91%E8%8E%93%E6%B4%BE5-%E6%90%AD%E5%BB%BAMC%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%85%A8%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/16.png" alt="16"></p><p>像我这里, 很明显是支持<code>ipv6</code>的.</p><p>如果找不到<code>ipv6</code>的选项, 那就说明你的路由器不支持公网ipv6. 如果有, 保证其是开启状态.</p><p>接下来, 找到防火墙选项, 关闭或将防护等级调低, 这一步是为了<strong>让内网暴露在公网上</strong>.</p><p><img lazyload src="/images/loading.svg" data-src="/2025/02/21/%E8%B6%85%E8%AF%A6%E7%BB%86-%E6%A0%91%E8%8E%93%E6%B4%BE5-%E6%90%AD%E5%BB%BAMC%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%85%A8%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/17.png" alt="17"></p><p>注意, 你需要清楚自己在做什么, 内网暴露在公网上意味着<b><mark>设备被攻击渗透的可能性大大增加</mark></b>.</p><p>如果害怕, 且没有网安经验, 还是建议不要随意关闭防火墙.</p><p>然后, 把<code>WNetWatcher</code>上路由器或树莓派的<code>ipv6</code>地址复制下来, <strong>PC切换到别的WIFI</strong>, <code>Win+R</code>键入<code>cmd</code>打开终端, 输入这样的命令:</p><div class="code-container" data-rel="Cmd"><figure class="iseeu highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="built_in">ping</span> -<span class="number">6</span> &lt;ipv6地址&gt;</span><br></pre></td></tr></table></figure></div><p>如果能ping通, 如下图, 说明你的路由器支持公网ipv6!</p><p><img lazyload src="/images/loading.svg" data-src="/2025/02/21/%E8%B6%85%E8%AF%A6%E7%BB%86-%E6%A0%91%E8%8E%93%E6%B4%BE5-%E6%90%AD%E5%BB%BAMC%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%85%A8%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/18.png" alt="18"></p><p>如果此时树莓派上正在运行服务端, 且你可以通过<code>[ipv6地址]:端口</code>, 比如<code>[2409:1145:1919:abcd:...:0721]:25565</code>进入服务器, 那么恭喜你, 你的服务器是可以被外网访问的!</p><h4 id="配置DDnS"><a href="#配置DDnS" class="headerlink" title="配置DDnS"></a>配置DDnS</h4><p>经过上面的检查, 已经保证服务器可以通过ipv6地址来访问了.</p><p>那为什么还要配置DDnS(Dynamic Domain Name System)呢?</p><p>因为这个ipv6地址是<strong>动态变化</strong>的, 而我们希望它是一个<strong>固定</strong>的地址&#x2F;域名. 所以就需要配置DDnS.</p><p>配置DDnS可分为3步:</p><ol><li>找域名注册商获取域名</li><li>找DDnS服务商获取解析服务</li><li>本地配置DDnS解析更新</li></ol><p>在撰稿时, 我原来使用的<strong>免费</strong>域名服务商(<a class="link" target="_blank" rel="noopener" href="https://nic.us.kg/">nic.us.kg<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>)挂了…</p><p>详情请见<a class="link" target="_blank" rel="noopener" href="https://github.com/DigitalPlatDev/FreeDomain">这里<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p><p>所以, 我就没打算细讲第1步和第2步的内容了.</p><p>第1步和第2步, 可以参考<a class="link" target="_blank" rel="noopener" href="https://www.bilibili.com/opus/934222766331134032">这篇文章<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>.</p><p>这里讲讲第3步.</p><p>我们需要一个工具, 可以在ipv6地址发生变化时, 将新的DDnS解析提交给DDnS服务商(这里使用的是Cloudflare).</p><p><a class="link" target="_blank" rel="noopener" href="https://github.com/jeessy2/ddns-go">ddns-go<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>就可以实现我们的需求.</p><p>在Release页根据系统架构下载对应的<code>ddns-go</code>, 如果是树莓派5, 就选择<code>ddns-go_&lt;version&gt;_linux_arm64.tar.gz</code>, 复制下载链接, 在树莓派上用<code>wget</code>下载. (提前cd到一个用于存放下载文件的目录)</p><p>如果卡住的话就稍微等一等, <code>ddns-go</code>文件挺小, 应该是能成功下载的.</p><p>下载完成后, 用<code>tar</code>解压, 参照<a class="link" target="_blank" rel="noopener" href="https://github.com/jeessy2/ddns-go">README<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>执行安装命令.</p><p>我是直接<code>sudo ./ddns-go -s install</code>了.</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">tar -zxvf &lt;下载的.tar.gz文件&gt;</span><br></pre></td></tr></table></figure></div><p>参见<a class="link" target="_blank" rel="noopener" href="https://github.com/jeessy2/ddns-go">README<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>进行安装, 这里我直接执行<code>./ddns-go -s intall</code>了.</p><p>安装完成后, <code>ddns-go</code>会在<code>9876</code>端口上开放配置网页, 在PC浏览器上访问<code>http://&lt;树莓派IP&gt;:9876</code>, 输入树莓派的用户名和密码进入Web配置界面.</p><p>选择DDnS服务商 (NameSilo是自带DDnS服务的, 但我是从.us.kg转的NameSilo, 之前用Cloudflare, 所以我还是接着用Cloudflare了), 开启ipv6解析, 选择通过网卡获取IP, 输入你的域名, 保存.</p><p>稍等片刻, ping一下你的域名, 如果显示的是树莓派的ipv6地址, 说明DDnS配置成功了!</p><h4 id="可选-设置防火墙"><a href="#可选-设置防火墙" class="headerlink" title="[可选] 设置防火墙"></a>[可选] 设置防火墙</h4><p>经过上面的步骤, 虽然可以通过域名访问服务器了 但树莓派的其它端口(如<code>ssh</code>的<code>22</code>, <code>vnc-server</code>的<code>5900</code>)也同时暴露在公网上了.</p><p>这非常不安全. 我们只希望服务器的<code>25565</code>端口被公网访问.</p><p>有多种解决思路, 这里我选择设置防火墙, 我觉得这样最安全.</p><div class="note p-4 mb-4 rounded-small danger icon-padding"><i class="note-icon fa-solid fa-bolt"></i><p><strong>防火墙一定要谨慎设置, 别把自己锁在服务器外了!</strong></p></div><p>我的防火墙规则: <strong>只允许内网设备访问22和5900端口</strong>.</p><p>我使用的命令工具是<code>ufw</code>. 通过<code>sudo apt install ufw</code>安装.</p><div class="note p-4 mb-4 rounded-small danger icon-padding"><i class="note-icon fa-solid fa-bolt"></i><p>注意, ufw的默认规则是: <strong>拒绝所有传入的连接</strong>，并允许所有传出的连接.</p></div><p>通过如下命令添加防火墙规则 (根据你的实际情况进行修改):</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 允许任意IP访问25565端口, 25565改成你的Minecraft服务器端口.</span></span><br><span class="line"><span class="built_in">sudo</span> ufw allow from any to any port 25565</span><br><span class="line"></span><br><span class="line"><span class="comment"># 允许3种常见的内网IP段访问22和5900端口.</span></span><br><span class="line"><span class="built_in">sudo</span> ufw allow from 192.168.0.0/16 to any port 22</span><br><span class="line"><span class="built_in">sudo</span> ufw allow from 192.168.0.0/16 to any port 5900</span><br><span class="line"><span class="built_in">sudo</span> ufw allow from 10.0.0.0/8 to any port 22</span><br><span class="line"><span class="built_in">sudo</span> ufw allow from 10.0.0.0/8 to any port 5900</span><br><span class="line"><span class="built_in">sudo</span> ufw allow from 172.16.0.0/12 to any port 22</span><br><span class="line"><span class="built_in">sudo</span> ufw allow from 172.16.0.0/12 to any port 5900</span><br><span class="line"></span><br><span class="line"><span class="comment"># 禁止所有对22和5900的访问. 这里ufw规则的检索顺序是从上到下, 先指定的规则优先生效.</span></span><br><span class="line"><span class="built_in">sudo</span> ufw deny 22</span><br><span class="line"><span class="built_in">sudo</span> ufw deny 5900</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启防火墙</span></span><br><span class="line"><span class="built_in">sudo</span> ufw <span class="built_in">enable</span></span><br></pre></td></tr></table></figure></div><p>之后, 输入<code>sudo ufw status numbered</code>, 如果输出为:</p><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">Status: active</span><br><span class="line"></span><br><span class="line">     To                         Action      From</span><br><span class="line">     --                         ------      ----</span><br><span class="line">[ 1] 25565                      ALLOW IN    Anywhere</span><br><span class="line">[ 2] 22                         ALLOW IN    192.168.0.0/16</span><br><span class="line">[ 3] 5900                       ALLOW IN    192.168.0.0/16</span><br><span class="line">[ 4] 22                         ALLOW IN    10.0.0.0/8</span><br><span class="line">[ 5] 5900                       ALLOW IN    10.0.0.0/8</span><br><span class="line">[ 6] 22                         ALLOW IN    172.16.0.0/12</span><br><span class="line">[ 7] 5900                       ALLOW IN    172.16.0.0/12</span><br><span class="line">[ 8] 22                         DENY IN     Anywhere</span><br><span class="line">[ 9] 5900                       DENY IN     Anywhere</span><br><span class="line">[10] 25565 (v6)                 ALLOW IN    Anywhere (v6)</span><br><span class="line">[11] 22 (v6)                    DENY IN     Anywhere (v6)</span><br><span class="line">[12] 5900 (v6)                  DENY IN     Anywhere (v6)</span><br></pre></td></tr></table></figure></div><p>说明防火墙规则设置成功.</p><p>先不要关闭此时的SSH终端, 打开新的SSH终端, 如果用域名无法连接, <strong>用本地树莓派IP可以连接</strong>, 说明防火墙设置成功.</p><hr><h2 id="终端会话管理-–-screen"><a href="#终端会话管理-–-screen" class="headerlink" title="终端会话管理 – screen"></a>终端会话管理 – screen</h2><p>你可能意识到了这样的问题: <code>paper.jar</code>和<code>frpc</code>都会阻塞进程, 要如何同时运行它们?</p><p>你可能会觉得, 简单呀, 开<strong>2</strong>个终端不就行了? 用<strong>PuTTY</strong>连2次.</p><p>但这样还是有问题: <strong>退出SSH终端后, 程序就中断了.</strong></p><p>于是, 我们需要一个管理终端会话的工具, 它需要有以下功能:</p><ul><li>在不需要交互的时候, <strong>可以把进程放到后台运行</strong>. (退出终端就不会导致程序退出)</li><li>在需要交互的时候, <strong>可以把后台的进程调到前台</strong>. (打开新终端后可以恢复对话)</li></ul><p>这里我使用的工具是<strong>screen</strong>.</p><p>你可能也听说过相关的工具, 比如<strong>tmux</strong>. 诚然, 它比<strong>screen</strong>要强大的多, 但我觉得它有点<strong>overdesign</strong>了, <strong>screen</strong>已经能满足我的需求, 所以我还是选择<strong>screen</strong>. 以下的内容也是以<strong>screen</strong>为例.</p><p>安装<strong>screen</strong>:</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install screen</span><br></pre></td></tr></table></figure></div><div class="note-large info"><div class="notel-title rounded-t-lg p-3 font-bold text-lg flex flex-row gap-2 items-center"><i class="notel-icon fa-solid fa-circle-info"></i><p><strong>你需要掌握的screen用法</strong></p></div><div class="notel-content"><style>.note-large .notel-content table{border-spacing:0;border-collapse:collapse;width:100%;overflow:auto;margin-bottom:1.2rem;box-shadow:var(--redefine-box-shadow-flat);border-radius:14px}.note-large .notel-content table thead th{border-bottom:1px solid var(--shadow-color-1);background-color:var(--third-background-color)!important}.note-large .notel-content table thead th:first-child{border-top-left-radius:14px}.note-large .notel-content table thead th:last-child{border-top-right-radius:14px}.note-large .notel-content table tbody tr:last-child td:first-child{border-bottom-left-radius:14px}.note-large .notel-content table tbody tr:last-child td:last-child{border-bottom-right-radius:14px}.note-large .notel-content table td,.note-large .notel-content table th{padding:8px 16px;border-left:1px solid var(--shadow-color-1)}.note-large .notel-content table td:first-child,.note-large .notel-content table th:first-child{border-left:none}.note-large .notel-content table tr{background-color:var(--background-color)}.note-large .notel-content table tr:nth-child(2n){background-color:var(--second-background-color)}</style><h3 id="screen命令基本语法"><a href="#screen命令基本语法" class="headerlink" title="screen命令基本语法"></a>screen命令基本语法</h3><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">screen [-opts] [cmd [args]]</span><br></pre></td></tr></table></figure></div><p>其中, <code>-opts</code>是<code>screen</code>命令的选项, <code>cmd</code>是要执行的命令, <code>args</code>是命令的参数.<br>&#96;</p><p>比较常用的<code>-opts</code>如下表, 我觉得英文描述很清楚, 所以就不翻译了. (也可以自行<code>screen --help</code>查看)</p><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td><strong>-d (-r)</strong></td><td><strong>Detach the elsewhere running screen (and reattach here).</strong></td></tr><tr><td><strong>-dmS name</strong></td><td><strong>Start as daemon: Screen session in detached mode.</strong></td></tr><tr><td>-D (-r)</td><td>Detach and logout remote (and reattach here).</td></tr><tr><td>-D -RR</td><td>Do whatever is needed to get a screen session.</td></tr><tr><td>-h lines</td><td>Set the size of the scrollback history buffer.</td></tr><tr><td><strong>-ls [match] or -list</strong></td><td><strong>Do nothing, just list our SockDir [on possible matches].</strong></td></tr><tr><td>-Logfile file</td><td>Set logfile name.</td></tr><tr><td>-m</td><td>Ignore $STY variable, do create a new screen session.</td></tr><tr><td>-q</td><td>Quiet startup. Exits with non-zero return code if unsuccessful.</td></tr><tr><td><strong>-r [session]</strong></td><td><strong>Reattach to a detached screen process.</strong></td></tr><tr><td>-R</td><td>Reattach if possible, otherwise start a new session.</td></tr><tr><td><strong>-S sockname</strong></td><td><strong>Name this session<pid>.sockname instead of<pid>.<tty>.<host>.</host></tty></pid></pid></strong></td></tr><tr><td>-U</td><td>Tell screen to use UTF-8 encoding.</td></tr><tr><td>-wipe [match]</td><td>Do nothing, just clean up SockDir [on possible matches].</td></tr><tr><td><strong>-x</strong></td><td><strong>Attach to a not detached screen. (Multi display mode).</strong></td></tr><tr><td><strong>-X</strong></td><td><strong>Execute<cmd>as a screen command in the specified session.</cmd></strong></td></tr></tbody></table><hr><h3 id="screen命令常见用法"><a href="#screen命令常见用法" class="headerlink" title="screen命令常见用法"></a>screen命令常见用法</h3><ul><li><strong>创建会话</strong></li></ul><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">screen -S &lt;name&gt;    <span class="comment"># 创建名为&lt;name&gt;的会话并进入</span></span><br><span class="line">screen -dmS &lt;name&gt;  <span class="comment"># 创建名为&lt;name&gt;的会话并在后台运行</span></span><br></pre></td></tr></table></figure></div><ul><li><strong>列出会话</strong></li></ul><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">screen -<span class="built_in">ls</span>  <span class="comment"># 列出当前用户的所有会话</span></span><br></pre></td></tr></table></figure></div><ul><li><strong>进入会话</strong></li></ul><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">screen -r &lt;name&gt;  <span class="comment"># 进入名为&lt;name&gt;的会话</span></span><br></pre></td></tr></table></figure></div><ul><li><strong>退出会话</strong><ul><li>如果你的当前终端正在该会话中, 按下<code>Ctrl+A</code>再按<code>D</code>即可退出会话.</li><li>如果你的当前终端并不在该会话中, 会话正被另一个终端使用, 你可以用以下命令退出另一个终端中的会话:</li></ul></li></ul><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">screen -d &lt;name&gt;</span><br></pre></td></tr></table></figure></div><ul><li><strong>终止进程</strong></li></ul><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">screen -X -S &lt;name&gt; quit  <span class="comment"># 终止名为&lt;name&gt;的会话中的所有进程</span></span><br></pre></td></tr></table></figure></div><p>或</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">kill</span> &lt;pid&gt;  <span class="comment"># &lt;pid&gt;可由`screen -ls`命令获取</span></span><br></pre></td></tr></table></figure></div><ul><li><strong>向进程发送命令</strong></li></ul><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">screen -x -S &lt;name&gt; -p 0 -X stuff <span class="string">&quot;[cmd]<span class="subst">$(printf \\r)</span>&quot;</span></span><br><span class="line"><span class="comment"># stuff相当于往进程的输入缓冲区中输入命令, 最后的$(printf \\r)是回车符, 没有它, 命令不会被执行.</span></span><br></pre></td></tr></table></figure></div></div></div><hr><h3 id="开服脚本"><a href="#开服脚本" class="headerlink" title="开服脚本"></a>开服脚本</h3><p>有了screen之后, 我们就可以方便地<strong>创建、终止、进入、退出</strong>会话了.</p><p>由此我们就可以给出<code>开服脚本</code>:</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在后台创建screen</span></span><br><span class="line">screen -dmS mc1</span><br><span class="line">screen -dmS frpc1</span><br><span class="line">screen -dmS frpc2</span><br><span class="line"></span><br><span class="line"><span class="comment"># paper端</span></span><br><span class="line">screen -x -S mc1 -p 0 -X stuff <span class="string">&quot;cd paper<span class="subst">$(printf \\r)</span>&quot;</span></span><br><span class="line">screen -x -S mc1 -p 0 -X stuff <span class="string">&quot;/usr/local/jdk-21.0.5/bin/java -Xms5G -Xmx5G -XX:+UseG1GC -XX:+ParallelRefProcEnabled -XX:MaxGCPauseMillis=200 -XX:+UnlockExperimentalVMOptions -XX:+DisableExplicitGC -XX:+AlwaysPreTouch -XX:G1NewSizePercent=30 -XX:G1MaxNewSizePercent=40 -XX:G1HeapRegionSize=8M -XX:G1ReservePercent=20 -XX:G1HeapWastePercent=5 -XX:G1MixedGCCountTarget=4 -XX:InitiatingHeapOccupancyPercent=15 -XX:G1MixedGCLiveThresholdPercent=90 -XX:G1RSetUpdatingPauseTimePercent=5 -XX:SurvivorRatio=32 -XX:+PerfDisableSharedMem -XX:MaxTenuringThreshold=1 -Dusing.aikars.flags=https://mcflags.emc.gs -Daikars.new.flags=true -jar paper-1.21.1.jar --nogui<span class="subst">$(printf \\r)</span>&quot;</span></span><br><span class="line"><span class="comment"># 这里java用了全路径, 是因为脚本在某些场合执行的时候, 不会使用系统环境变量, 用全路径比较保险.</span></span><br><span class="line"><span class="comment"># 注意, 这里的-Xms5G -Xmx5G和最后的paper-1.21.1.jar要根据你的实际情况修改!</span></span><br><span class="line">screen -d mc1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 内网穿透1</span></span><br><span class="line">screen -x -S frpc1 -p 0 -X stuff <span class="string">&quot;cd natfrp<span class="subst">$(printf \\r)</span>&quot;</span></span><br><span class="line">screen -x -S frpc1 -p 0 -X stuff <span class="string">&quot;./frpc -f xxxx:xxxx<span class="subst">$(printf \\r)</span>&quot;</span></span><br><span class="line"><span class="comment"># 这里的-f xxxx:xxxx修改为你自己的配置信息, 下同</span></span><br><span class="line">screen -d frpc1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 内网穿透2</span></span><br><span class="line">screen -x -S frpc2 -p 0 -X stuff <span class="string">&quot;cd natfrp<span class="subst">$(printf \\r)</span>&quot;</span></span><br><span class="line">screen -x -S frpc2 -p 0 -X stuff <span class="string">&quot;./frpc -f yyyy:yyyy<span class="subst">$(printf \\r)</span>&quot;</span></span><br><span class="line">screen -d frpc2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 内网穿透3</span></span><br><span class="line">screen -x -S frpc3 -p 0 -X stuff <span class="string">&quot;cd natfrp<span class="subst">$(printf \\r)</span>&quot;</span></span><br><span class="line">screen -x -S frpc3 -p 0 -X stuff <span class="string">&quot;./frpc -f zzzz:zzzz<span class="subst">$(printf \\r)</span>&quot;</span></span><br><span class="line">screen -d frpc3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以对同个本地端口建立多条映射隧道, 相当于备用节点.</span></span><br></pre></td></tr></table></figure></div><p>使用<code>nano</code>编辑器将上述脚本保存到<code>~/auto/start_server.sh</code>中 (或其它目录):</p><div class="note p-4 mb-4 rounded-small info icon-padding"><i class="note-icon fa-solid fa-circle-info"></i><p><strong>以下是保姆级教程, 给真·Linux萌新看的</strong></p></div><p>用<code>nano</code>新建<code>start_server.sh</code>文件:</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> ~/auto</span><br><span class="line">nano ~/auto/start_server.sh</span><br></pre></td></tr></table></figure></div><p><strong>根据你的情况修改上述脚本</strong>, 复制后, 在<code>PuTTY</code>终端窗口中的打开的<code>nano</code>编辑器中<code>右键</code>即可复制, 按<code>Ctrl+O</code>保存, 再按<code>Ctrl+X</code>退出.</p><p>这之后可以执行</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> ~/auto/start_server.sh</span><br></pre></td></tr></table></figure></div><p>看看输出内容是否是预期的脚本.</p><p>执行</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> +x ~/auto/start_server.sh</span><br></pre></td></tr></table></figure></div><p>来赋予可执行权限.</p><p>以后就可以直接<code>bash ~/auto/start_server.sh</code>来启动服务器了.</p><p>服务器启动后, 可以用<code>screen -r mc1</code>来查看服务器后台.</p><hr><h2 id="设置定时开关服"><a href="#设置定时开关服" class="headerlink" title="设置定时开关服"></a>设置定时开关服</h2><p>我是在学校宿舍开服, 于是就面临这样一个难题: <strong>断电</strong>. 晚上宿舍会定时断电.</p><p>我们学校的宿舍断电时间为: 周日到周四的晚上12点.</p><p>所以, 我们需要设置定时任务, 让树莓派在12点前自动停服关机.</p><p>宿舍在早上6点来电, 树莓派在重新通电后会自动开机, 于是自动开服就有2个方案: <strong>定时开机</strong>, <strong>开机自启</strong>.</p><p>考虑到每次开机的时候, 我不一定是想要开服, 所以我选择了<strong>定时开机</strong>.</p><p>谈到定时任务, 离不开一个强大的工具: <strong>crontab</strong>. 树莓派官方系统已经自带.</p><p>菜鸟教程上有介绍crontab命令的<a class="link" target="_blank" rel="noopener" href="https://www.runoob.com/linux/linux-comm-crontab.html">文章<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>, 我这里就不赘述其用法了.</p><p>注意<code>sudo crontab -e</code>和<code>crontab -e</code>不同, 请全部使用<code>crontab -e</code>.</p><h3 id="关服脚本"><a href="#关服脚本" class="headerlink" title="关服脚本"></a>关服脚本</h3><p>在使用<code>crontab</code>之前, 先创建一个关服脚本<code>~/auto/stop_server.sh</code>.</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">nano ~/auto/stop_server.sh</span><br></pre></td></tr></table></figure></div><p>脚本内容如下:</p><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line"># 关闭服务器</span><br><span class="line"></span><br><span class="line">screen -S mc1 -p 0 -X stuff &quot;kickall$(printf \\r)&quot;</span><br><span class="line"># 先把所有玩家踢出去</span><br><span class="line">screen -S mc1 -p 0 -X stuff &quot;save-all$(printf \\r)&quot;</span><br><span class="line"># 保存游戏</span><br><span class="line">screen -S mc1 -p 0 -X stuff &quot;stop$(printf \\r)&quot;</span><br><span class="line"># 关服</span><br><span class="line">screen -S &quot;mc1&quot; -X quit</span><br><span class="line"># 终止 mc1 会话</span><br><span class="line"></span><br><span class="line"># 关闭内网穿透</span><br><span class="line"></span><br><span class="line">screen -S &quot;frpc1&quot; -p 0 -X stuff &quot;^C&quot;</span><br><span class="line">screen -S &quot;frpc1&quot; -X quit</span><br><span class="line">screen -S &quot;frpc2&quot; -p 0 -X stuff &quot;^C&quot;</span><br><span class="line">screen -S &quot;frpc2&quot; -X quit</span><br><span class="line">screen -S &quot;frpc3&quot; -p 0 -X stuff &quot;^C&quot;</span><br><span class="line">screen -S &quot;frpc3&quot; -X quit</span><br></pre></td></tr></table></figure></div><p>别忘了执行</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> +x ~/auto/stop_server.sh</span><br></pre></td></tr></table></figure></div><p>来赋予可执行权限.</p><hr><h3 id="设置定时任务"><a href="#设置定时任务" class="headerlink" title="设置定时任务"></a>设置定时任务</h3><p>终端键入</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure></div><p>首次运行时会让你选择默认编辑器, 如果什么都不懂, 建议选择<code>nano</code>: 只要会<code>Ctrl+O</code>保存、<code>Ctrl+X</code>退出, 就行.</p><p>然后, 在编辑器最后添加如下内容:</p><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">55 23 * * 0-4 bash auto/stop_server.sh</span><br><span class="line"># 在周日到周四, 晚上23:55分, 执行关服脚本.</span><br><span class="line"></span><br><span class="line">57 23 * * 0-4 sudo shutdown -h now</span><br><span class="line"># 在周日到周四, 晚上23:57分, 立即关机.</span><br><span class="line"></span><br><span class="line">5 6  * * 1-5 bash auto/start_server.sh</span><br><span class="line"># 在周一到周五, 早上6:05分, 执行开服脚本.</span><br></pre></td></tr></table></figure></div><p>然后, 按<code>Ctrl+O</code>保存, 再按<code>Ctrl+X</code>退出.</p><p>之后, 可输入<code>crontab -l</code>来查看定时任务是否设置成功.</p><p>如果你想做一个定时关服提醒, 可以创建一个<code>~/auto/warn_server.sh</code>文件, 写入如下内容:</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">screen -S mc1 -p 0 -X stuff <span class="string">&quot;bc Warning: The server will be shutdown in 10 min!<span class="subst">$(printf \\r)</span>&quot;</span></span><br><span class="line">screen -d mc1</span><br></pre></td></tr></table></figure></div><p><code>stuff</code>后的内容就是要在paper终端中输入的命令, 我这里用的是<code>EssentialsX</code>插件的<code>bc</code>命令, 如果你没有安装<code>EssentialsX</code>, 把<code>bc</code>改成<code>say</code>也可以.</p><p>别忘了执行:</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> chmox +x ~/auto/warn_server.sh</span><br></pre></td></tr></table></figure></div><p>然后, <code>crontab -e</code>, 添加如下内容:</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">45 23 * * 0-4 bash auto/warn_server.sh</span><br></pre></td></tr></table></figure></div><p>就可以实现关服前10分钟提醒服内玩家了.</p><hr><h3 id="可选-前台执行定时任务"><a href="#可选-前台执行定时任务" class="headerlink" title="[可选] 前台执行定时任务"></a>[可选] 前台执行定时任务</h3><p><code>crontab</code>默认在后台执行任务. 如果你的树莓派有一块显示屏, 你希望它能显示服务器的终端, 也就是在前台执行<code>auto/start_server.sh</code>, 可以<code>crontab -e</code>并作出如下修改:</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 5 6  * * 1-5 bash auto/start_server.sh</span></span><br><span class="line">5 6 * * 1-5 <span class="built_in">export</span> DISPLAY=:0 &amp;&amp; lxterminal -e <span class="string">&quot;bash auto/start_server.sh&quot;</span></span><br></pre></td></tr></table></figure></div><p>此外, 还要在原来的<code>start_server.sh</code>脚本的最后一行加上<code>screen -r mc1</code>.</p><p>修改后的开服脚本如下:</p><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在后台创建screen</span></span><br><span class="line">screen -dmS mc1</span><br><span class="line">screen -dmS frpc1</span><br><span class="line">screen -dmS frpc2</span><br><span class="line"></span><br><span class="line"><span class="comment"># paper端</span></span><br><span class="line">screen -x -S mc1 -p 0 -X stuff <span class="string">&quot;cd paper<span class="subst">$(printf \\r)</span>&quot;</span></span><br><span class="line">screen -x -S mc1 -p 0 -X stuff <span class="string">&quot;/usr/local/jdk-21.0.5/bin/java -Xms5G -Xmx5G -XX:+UseG1GC -XX:+ParallelRefProcEnabled -XX:MaxGCPauseMillis=200 -XX:+UnlockExperimentalVMOptions -XX:+DisableExplicitGC -XX:+AlwaysPreTouch -XX:G1NewSizePercent=30 -XX:G1MaxNewSizePercent=40 -XX:G1HeapRegionSize=8M -XX:G1ReservePercent=20 -XX:G1HeapWastePercent=5 -XX:G1MixedGCCountTarget=4 -XX:InitiatingHeapOccupancyPercent=15 -XX:G1MixedGCLiveThresholdPercent=90 -XX:G1RSetUpdatingPauseTimePercent=5 -XX:SurvivorRatio=32 -XX:+PerfDisableSharedMem -XX:MaxTenuringThreshold=1 -Dusing.aikars.flags=https://mcflags.emc.gs -Daikars.new.flags=true -jar paper-1.21.1.jar --nogui<span class="subst">$(printf \\r)</span>&quot;</span></span><br><span class="line"><span class="comment"># 这里java用了全路径, 是因为脚本在某些场合执行的时候, 不会使用系统环境变量, 用全路径比较保险.</span></span><br><span class="line"><span class="comment"># 注意, 这里的-Xms5G -Xmx5G和最后的paper-1.21.1.jar要根据你的实际情况修改!</span></span><br><span class="line">screen -d mc1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 内网穿透1</span></span><br><span class="line">screen -x -S frpc1 -p 0 -X stuff <span class="string">&quot;cd natfrp<span class="subst">$(printf \\r)</span>&quot;</span></span><br><span class="line">screen -x -S frpc1 -p 0 -X stuff <span class="string">&quot;./frpc -f xxxx:xxxx<span class="subst">$(printf \\r)</span>&quot;</span></span><br><span class="line"><span class="comment"># 这里的-f xxxx:xxxx修改为你自己的配置信息, 下同</span></span><br><span class="line">screen -d frpc1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 内网穿透2</span></span><br><span class="line">screen -x -S frpc2 -p 0 -X stuff <span class="string">&quot;cd natfrp<span class="subst">$(printf \\r)</span>&quot;</span></span><br><span class="line">screen -x -S frpc2 -p 0 -X stuff <span class="string">&quot;./frpc -f yyyy:yyyy<span class="subst">$(printf \\r)</span>&quot;</span></span><br><span class="line">screen -d frpc2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 内网穿透3</span></span><br><span class="line">screen -x -S frpc3 -p 0 -X stuff <span class="string">&quot;cd natfrp<span class="subst">$(printf \\r)</span>&quot;</span></span><br><span class="line">screen -x -S frpc3 -p 0 -X stuff <span class="string">&quot;./frpc -f zzzz:zzzz<span class="subst">$(printf \\r)</span>&quot;</span></span><br><span class="line">screen -d frpc3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 恢复 mc1 会话</span></span><br><span class="line">screen -r mc1</span><br></pre></td></tr></table></figure></div><hr><h2 id="树莓派5开服性能"><a href="#树莓派5开服性能" class="headerlink" title="树莓派5开服性能"></a>树莓派5开服性能</h2><p>以下数据可供参考.</p><p>在分配了<code>6 GB</code>内存、原版服务器(只装了一些不影响玩法的功能插件)的情况下:</p><ul><li>游戏人数在<code>12</code>人左右时, 仍有较流畅的游玩体验.</li><li>服务器功耗在<code>2.9W ~ 6.1W</code>波动, 平均差不多<code>4.5W</code>的样子.</li><li>装甲被动散热, 没有装风扇, 未出现过热现象.</li></ul></div><div class="post-copyright-info w-full my-8 px-2 sm:px-6 md:px-8"><div class="article-copyright-info-container"><ul><li><strong>标题:</strong> [超详细] 树莓派5 搭建MC服务器 全过程记录</li><li><strong>作者:</strong> Coast23</li><li><strong>创建于 :</strong> 2025-02-21 16:40:28</li><li><strong>更新于 :</strong> 2025-02-24 18:24:46</li><li><strong>链接:</strong> https://coast23.github.io/2025/02/21/超详细-树莓派5-搭建MC服务器-全过程记录/</li><li><strong>版权声明: </strong>本文章采用 <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0">CC BY-NC-SA 4.0</a> 进行许可。</li></ul></div></div><ul class="post-tags-box text-lg mt-1.5 flex-wrap justify-center flex md:hidden"><li class="tag-item mx-0.5"><a href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/">#树莓派</a>&nbsp;</li><li class="tag-item mx-0.5"><a href="/tags/Minecraft/">#Minecraft</a>&nbsp;</li></ul><div class="article-nav my-8 flex justify-between items-center px-2 sm:px-6 md:px-8"><div class="article-prev border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2"><a class="prev" rel="prev" href="/2025/03/01/Windows%E4%B8%8B%E4%BD%BF%E7%94%A8Docker%E5%B0%81%E5%8D%B0EasyConnect/"><span class="left arrow-icon flex justify-center items-center"><i class="fa-solid fa-chevron-left"></i> </span><span class="title flex justify-center items-center"><span class="post-nav-title-item">Windows下使用Docker封印EasyConnect</span> <span class="post-nav-item">上一篇</span></span></a></div><div class="article-next border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2"><a class="next" rel="next" href="/2025/01/26/Adworld-Re-Writeups/"><span class="title flex justify-center items-center"><span class="post-nav-title-item">Adworld Re Writeups</span> <span class="post-nav-item">下一篇</span> </span><span class="right arrow-icon flex justify-center items-center"><i class="fa-solid fa-chevron-right"></i></span></a></div></div><div class="comment-container px-2 sm:px-6 md:px-8 pb-8"><div class="comments-container mt-10 w-full"><div id="comment-anchor" class="w-full h-2.5"></div><div class="comment-area-title w-full my-1.5 md:my-2.5 text-xl md:text-3xl font-bold">评论</div><div id="giscus-container"></div><script data-swup-reload-script defer>async function loadGiscus(){const t={src:"https://giscus.app/client.js","data-repo":"Coast23/For-Giscus","data-repo-id":"R_kgDONtYxFA","data-category":"Announcements","data-category-id":"DIC_kwDONtYxFM4CmNIc","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"1","data-theme":"preferred_color_scheme","data-lang":"zh-CN","data-input-position":"top","data-loading":"lazy",crossorigin:"anonymous",async:!0},a=document.createElement("script");for(const e in t)a.setAttribute(e,t[e]);document.getElementById("giscus-container").appendChild(a)}{let t=setTimeout(()=>{loadGiscus(),clearTimeout(t)},1e3)}</script></div></div></div><div class="toc-content-container"><div class="post-toc-wrap"><div class="post-toc"><div class="toc-title">目录</div><div class="page-title">[超详细] 树莓派5 搭建MC服务器 全过程记录</div><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-text">前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="nav-text">准备工作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%83%A7%E5%BD%95%E7%B3%BB%E7%BB%9F"><span class="nav-text">烧录系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8D%A2%E6%BA%90"><span class="nav-text">换源</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%A0%91%E8%8E%93%E6%B4%BEIP"><span class="nav-text">获取树莓派IP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SSH%E8%BF%9E%E6%8E%A5%E6%A0%91%E8%8E%93%E6%B4%BE-%E6%8D%A2%E6%BA%90"><span class="nav-text">SSH连接树莓派 &amp; 换源</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85jdk%E4%B8%8Epaper%E7%AB%AF"><span class="nav-text">安装jdk与paper端</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85jdk-%E9%85%8D%E7%BD%AE%E7%B3%BB%E7%BB%9F%E5%8F%98%E9%87%8F"><span class="nav-text">安装jdk &amp; 配置系统变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85paper-%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-text">安装paper &amp; 启动服务器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%AF%E9%80%89-%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2%E8%AE%BF%E9%97%AE%E6%A0%91%E8%8E%93%E6%B4%BE"><span class="nav-text">[可选] 远程桌面访问树莓派</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%80%E5%90%AFvnc%E6%9C%8D%E5%8A%A1"><span class="nav-text">开启vnc服务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#PC%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE%E6%A0%91%E8%8E%93%E6%B4%BE"><span class="nav-text">PC远程访问树莓派</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%96%E7%BD%91%E8%AE%BF%E9%97%AE%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-text">外网访问服务器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E6%9B%B4%E6%94%B9WIFI"><span class="nav-text">如何更改WIFI</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%96%E7%BD%91%E8%AE%BF%E9%97%AE%E6%96%B9%E6%B3%951-%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F"><span class="nav-text">外网访问方法1: 内网穿透</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%96%E7%BD%91%E8%AE%BF%E9%97%AE%E6%96%B9%E6%B3%952-%E5%88%A9%E7%94%A8%E5%85%AC%E7%BD%91ipv6%E4%B8%8EDDnS"><span class="nav-text">外网访问方法2: 利用公网ipv6与DDnS</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E6%94%AF%E6%8C%81ipv6"><span class="nav-text">判断是否支持ipv6</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%85%8D%E7%BD%AEDDnS"><span class="nav-text">配置DDnS</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%AF%E9%80%89-%E8%AE%BE%E7%BD%AE%E9%98%B2%E7%81%AB%E5%A2%99"><span class="nav-text">[可选] 设置防火墙</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%88%E7%AB%AF%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86-%E2%80%93-screen"><span class="nav-text">终端会话管理 – screen</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#screen%E5%91%BD%E4%BB%A4%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="nav-text">screen命令基本语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#screen%E5%91%BD%E4%BB%A4%E5%B8%B8%E8%A7%81%E7%94%A8%E6%B3%95"><span class="nav-text">screen命令常见用法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%80%E6%9C%8D%E8%84%9A%E6%9C%AC"><span class="nav-text">开服脚本</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E5%AE%9A%E6%97%B6%E5%BC%80%E5%85%B3%E6%9C%8D"><span class="nav-text">设置定时开关服</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E6%9C%8D%E8%84%9A%E6%9C%AC"><span class="nav-text">关服脚本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1"><span class="nav-text">设置定时任务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%AF%E9%80%89-%E5%89%8D%E5%8F%B0%E6%89%A7%E8%A1%8C%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1"><span class="nav-text">[可选] 前台执行定时任务</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%91%E8%8E%93%E6%B4%BE5%E5%BC%80%E6%9C%8D%E6%80%A7%E8%83%BD"><span class="nav-text">树莓派5开服性能</span></a></li></ol></div></div></div></div></div></div><div class="main-content-footer"><footer class="footer mt-5 py-5 h-auto text-base text-third-text-color relative border-t-2 border-t-border-color"><div class="info-container py-3 text-center"><div class="text-center">&copy; <span>2024</span> - 2025&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration:0.5s;color:#f54545"></i>&nbsp;&nbsp;<a href="/">Coast23</a><p class="post-count space-x-0.5"><span>共撰写了 22 篇文章 </span><span>共 51.2k 字</span></p></div><script data-swup-reload-script src="https://cn.vercount.one/js"></script><div class="relative text-center lg:absolute lg:right-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-right"><span id="busuanzi_container_site_uv" class="lg:!block"><span class="text-sm">访问人数</span> <span id="busuanzi_value_site_uv"></span> </span><span id="busuanzi_container_site_pv" class="lg:!block"><span class="text-sm">总访问量</span> <span id="busuanzi_value_site_pv"></span></span></div><div class="relative text-center lg:absolute lg:left-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-left"><span class="lg:block text-sm">由 <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="relative top-[2px] inline-block align-baseline" version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" class="text-base" href="https://hexo.io">Hexo</a> 驱动</span> <span class="text-sm lg:block">主题&nbsp;<a class="text-base" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.8.2</a></span></div><div>博客已运行 <span class="odometer" id="runtime_days"></span> 天 <span class="odometer" id="runtime_hours"></span> 小时 <span class="odometer" id="runtime_minutes"></span> 分钟 <span class="odometer" id="runtime_seconds"></span> 秒</div><script data-swup-reload-script>try{function odometer_init(){document.querySelectorAll(".odometer").forEach(e=>{new Odometer({el:e,format:"( ddd).dd",duration:200})})}odometer_init()}catch(e){}</script></div></footer></div></div><div class="post-tools"><div class="post-tools-container"><ul class="article-tools-list"><li class="right-bottom-tools page-aside-toggle"><i class="fa-regular fa-outdent"></i></li><li class="go-comment"><i class="fa-regular fa-comments"></i></li></ul></div></div><div class="right-side-tools-container"><div class="side-tools-container"><ul class="hidden-tools-list"><li class="right-bottom-tools tool-font-adjust-plus flex justify-center items-center"><i class="fa-regular fa-magnifying-glass-plus"></i></li><li class="right-bottom-tools tool-font-adjust-minus flex justify-center items-center"><i class="fa-regular fa-magnifying-glass-minus"></i></li><li class="right-bottom-tools tool-dark-light-toggle flex justify-center items-center"><i class="fa-regular fa-moon"></i></li><li class="right-bottom-tools tool-scroll-to-bottom flex justify-center items-center"><i class="fa-regular fa-arrow-down"></i></li></ul><ul class="visible-tools-list"><li class="right-bottom-tools toggle-tools-list flex justify-center items-center"><i class="fa-regular fa-cog fa-spin"></i></li><li class="right-bottom-tools tool-scroll-to-top flex justify-center items-center"><i class="arrow-up fas fa-arrow-up"></i> <span class="percent"></span></li></ul></div></div><div class="image-viewer-container"><img src=""></div><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-input-field-pre"><i class="fa-solid fa-keyboard"></i></span><div class="search-input-container"><input autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="站内搜索您需要的内容..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa-solid fa-times"></i></span></div><div id="search-result"><div id="no-result"><i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i></div></div></div></div></main><script src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/libs/Swup.min.js"></script><script src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/libs/SwupSlideTheme.min.js"></script><script src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/libs/SwupScriptsPlugin.min.js"></script><script src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/libs/SwupProgressPlugin.min.js"></script><script src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/libs/SwupScrollPlugin.min.js"></script><script src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/libs/SwupPreloadPlugin.min.js"></script><script>const swup=new Swup({plugins:[new SwupScriptsPlugin({optin:!0}),new SwupProgressPlugin,new SwupScrollPlugin({offset:80}),new SwupSlideTheme({mainElement:".main-content-body"}),new SwupPreloadPlugin],containers:["#swup"]})</script><script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/tools/imageViewer.js"></script><script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/utils.js"></script><script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/main.js"></script><script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/layouts/navbarShrink.js"></script><script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/tools/scrollTopBottom.js"></script><script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/tools/lightDarkSwitch.js"></script><script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/layouts/categoryList.js"></script><script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/tools/localSearch.js"></script><script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/tools/codeBlock.js"></script><script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/layouts/lazyload.js"></script><script src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/tools/runtime.js"></script><script src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/libs/odometer.min.js"></script><link rel="stylesheet" href="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/assets/odometer-theme-minimal.css"><script src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/libs/Typed.min.js"></script><script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/plugins/typed.js"></script><script src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/libs/mermaid.min.js"></script><script src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/plugins/mermaid.js"></script><script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/tools/tocToggle.js" data-swup-reload-script></script><script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/layouts/toc.js" data-swup-reload-script></script><script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/plugins/tabs.js" data-swup-reload-script></script><script src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/libs/moment-with-locales.min.js" data-swup-reload-script></script><script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/layouts/essays.js" data-swup-reload-script></script><script type="module" src="https://registry.npmmirror.com/hexo-theme-redefine/2.8.2/files/source/js/build/layouts/bookmarkNav.js"></script></body></html>